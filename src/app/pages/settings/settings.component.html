<div class="settings-page">
  <div class="hero glass">
    <div>
      <div class="chip">SETTINGS</div>
      <h2>Account & Appearance</h2>
      <p class="muted">Manage your profile, theme, currency, and password.</p>
    </div>
    <div class="hero-name" *ngIf="displayName()">{{ displayName() }}</div>
    <div class="status" *ngIf="status() || error()">
      <span class="ok" *ngIf="status()">{{ status() }}</span>
      <span class="err" *ngIf="error()">{{ error() }}</span>
    </div>
  </div>

  <div class="grid">
    <div class="card glass">
      <div class="card-head">
        <div>
          <div class="title">Profile</div>
          <div class="sub">Update your display name.</div>
        </div>
        <button class="btn primary desktop-only" (click)="saveProfile()">Save</button>
      </div>

      <div class="field">
        <label>Email</label>
        <input type="text" [value]="email()" readonly>
      </div>

      <div class="field">
        <label>Display name</label>
        <input type="text" [ngModel]="displayName()" (ngModelChange)="displayName.set($event)">
      </div>

      <button class="btn primary mobile-only" (click)="saveProfile()">Save</button>
    </div>

    <div class="card glass">
      <div class="card-head">
        <div>
          <div class="title">Preferences</div>
          <div class="sub">Theme and currency used across the app.</div>
        </div>
        <button class="btn primary desktop-only" (click)="savePreferences()">Save</button>
      </div>

      <div class="field">
        <label>Theme</label>
        <div class="seg">
          <button class="seg-btn" [class.active]="themeSvc.theme() === 'light'" (click)="applyTheme('light')">Light</button>
          <button class="seg-btn" [class.active]="themeSvc.theme() === 'dark'" (click)="applyTheme('dark')">Dark</button>
        </div>
      </div>

      <div class="field">
        <label>Currency</label>
        <select [ngModel]="currency()" (ngModelChange)="currency.set($event)">
          <option value="BDT">BDT</option>
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
          <option value="INR">INR</option>
        </select>
      </div>

      <button class="btn primary mobile-only" (click)="savePreferences()">Save</button>
    </div>

    <div class="card glass full">
      <div class="card-head">
        <div>
          <div class="title">Change password</div>
          <div class="sub">Enter your current password to set a new one.</div>
        </div>
        <button class="btn danger desktop-only" (click)="changePassword()">Update</button>
      </div>

      <div class="grid-3">
        <div class="field">
          <label>Current password</label>
          <input type="password" [ngModel]="currentPassword()" (ngModelChange)="currentPassword.set($event)">
        </div>
        <div class="field">
          <label>New password</label>
          <input type="password" [ngModel]="newPassword()" (ngModelChange)="newPassword.set($event)">
        </div>
        <div class="field">
          <label>Confirm new password</label>
          <input type="password" [ngModel]="confirmPassword()" (ngModelChange)="confirmPassword.set($event)">
        </div>
      </div>

      <button class="btn danger mobile-only" (click)="changePassword()">Update</button>
    </div>
  </div>
</div>
